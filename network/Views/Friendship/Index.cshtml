@model IEnumerable<network.Views.ViewModels.ShowUserViewModel>


<li>@Html.ActionLink("Show new friends", "NewRequest", "Friendship")
     @{ Html.RenderAction("CountRequests", "Friendship"); }</li>


<table class="table">

    @foreach (var item in Model)
    {
        <tr>
            

            <td>
                @if (item.Image.Length != 0)

                {
                    <div class="col-lg-9">
                        <img id="user_img"
                             style="border: solid" src="data:image/png;base64, @Convert.ToBase64String(item.Image)"
                             class="img-circle" />
                    </div>
                }
            </td>

            <td>
                <a href="@Url.Action("UsersPage","Users",new {id=item.Id},null)">
                    @Html.DisplayFor(modelItem => item.Name)
                    @Html.DisplayFor(modelItem => item.Firstname)
                </a>
            </td>

           
            <td>

            <td>
                <div class="btn-group">
                    <button class="btn">...</button>
                    <button class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <li>@Html.ActionLink("Show friends","FriendsOfFriends","Friendship",new {id=item.Id},null)</li>
                        <li class="divider"></li>
                        <li><input type="button" class="button-del" id="openModal" value="Delete friend"/></li>

                    </ul>
                </div>
            </td>
            <div id="deletFr" class="modal fade" data-url='@Url.Action("Delete", "Friendship", new {id = item.Id})'>
                <div id="deletFrContainer">

                </div>
            </div>
        </tr>

        


    }
</table>



@section Scripts{
    <script type="text/javascript">
        $(function() {
            $('#openModal').click(function() {
                var url = $('#deletFr').data('url');

                $.get(url,
                    function(data) {
                        $('#deletFrContainer').html(data);

                        $('#deletFr').modal('show');
                    });
            });
        });
    </script>
}


