@model network.Views.ViewModels.OpenConversationViewModel

@{   
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>*@

 


<div class="jumbotron">

    <div class="chat scr">

        @foreach (var item in Model.Messages)
        {
            if (item.SenderId == Model.UserStringId)
                {
                    <div class="containerr darker">
                        @if (Model.Members.Single(i => i.Id == item.SenderId).Image != null)
                            {
                                @*<img src="@String.Format("data:image/jpg;base64,{0}", Model.Members.FirstOrDefault(i => i.Id == item.SenderId).Image)" />*@
                            }


                        <p> @item.Message</p>

                        <div class="time-right">@item.Time</div>

                    </div>
                }               
        }
    </div>
    <br />



    <div class="form" id="Send">
        @using (Html.BeginForm("SendMessage", "Messages", FormMethod.Post))
        {
            @Html.HiddenFor(msg => msg.Conversation_id)
            <input type="text" name="Message" placeholder="Type message and press enter...">
        }
    </div>
</div>

@Styles.Render("~/Content/Chat.css")

@section Scripts {
    <script type="text/javascript">
        $(             
            $('#Send').keydown(function (event)
            {
                debugger;
                if (event.keyCode == 13)
                {
                    $('#Send').submit();
                }

            }));

        var d = $('.scr');
        d.scrollTop(d.prop("scrollHeight"));
    </script>
}                   